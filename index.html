

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>차에 대한 모든 것, 빠방</title>
    <style>
        /* 전체 화면을 중앙에 배치하기 위한 스타일 */
        .spinner-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* 로딩 스피너 스타일 */
        .spinner {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #dbff01; /* Blue */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
        }

        /* 스피너 애니메이션 */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        // detect if safari mobile
        function isMobileSafari() {
            return navigator.userAgent.match(/(iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/)
        }
        //Launch the element in your app if it's already installed on the phone
        function LaunchApp() {
            // 현재 페이지의 전체 URL을 가져옴
            var currentUrl = new URL(window.location.href);

            // 쿼리 파라미터 추출
            var queryParams = currentUrl.search;

            // Path Parameters 추출
            var pathParams = currentUrl.pathname;

            // 앱 스키마를 사용한 기본 URL
            var baseUrl = "epiapp://coruscating-sprite-19aa7b.netlify.app";

            // 쿼리 파라미터가 있는 경우 이를 추가
            var fullUrl = baseUrl + queryParams + pathParams;

            // 딥링크 URL 열기
            window.open(fullUrl, "_self");
        };

        function checkApp() {
             // 현재 페이지의 전체 URL을 가져옴
            var currentUrl = new URL(window.location.href);
            const extractedPath = new URL(currentUrl).pathname;  // 앞의 '/' 제거
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            let scheme, storeURL;

            console.log(`extractedPath ${extractedPath}`);
            const encodedPath = encodeURIComponent(extractedPath);
            console.log(`encodedPath ${encodedPath}`);
            if (/android/i.test(userAgent)) {
                // window.location.replace(`intent:#Intent;scheme=epiapp://coruscating-sprite-19aa7b.netlify.app${extractedPath};package=com.finishyourlap.epi;S.browser_fallback_url=https://play.google.com/store/apps/details?id=kr.co.captv.pooqV2;end`);
                window.open(`intent:#Intent;scheme=epiapp://coruscating-sprite-19aa7b.netlify.app${extractedPath};package=com.finishyourlap.epi;S.browser_fallback_url=https://play.google.com/store/apps/details?id=kr.co.captv.pooqV2;end`);
            } else if (/iPad|iPhone/.test(userAgent) && !window.MSStream) {
                if (isMobileSafari()){
                    // To avoid the "protocol not supported" alert, fail must open itunes store to dl the app, add a link to your app on the store
                    var appstorefail = "itms-apps://itunes.apple.com/app/wavve-웨이브/id987782077?mt=8";
                    var loadedAt = +new Date;
                    setTimeout(
                    function() {
                        if (+new Date - loadedAt < 2000){
                            window.location = appstorefail;
                        }
                    }
                    ,2000);
                    LaunchApp()

                }
            } else {
                alert("Android 및 iOS 기기에서만 접근 가능합니다.");
                return;
            }
        }

        window.onload = function () {
            checkApp();
        }
    </script>
</head>
<body>
    <div class="spinner-container">
        <div class="spinner"></div>
    </div>
</body>
</html>

